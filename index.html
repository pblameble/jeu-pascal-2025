<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Jeu Pascal 2025</title>
<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
<style>
body {
	font-family: 'Arial', sans-serif;
	background: #f2f2f2;
	margin: 0;
	padding: 0;
	display: flex;
	justify-content: center;
	min-height: 100vh;
}

.app {
	max-width: 400px;
	width: 100%;
	background: white;
	padding: 20px;
	margin: 20px;
	border-radius: 12px;
	box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

h1, h2 {
	text-align: center;
}

.intro {
	font-size: 1em;
	line-height: 1.5;
	margin-bottom: 20px;
	text-align: justify;
}

.carquois-img, .puits-img {
	width: 100%;
	max-height: 200px;
	object-fit: cover;
	border-radius: 10px;
	margin-bottom: 15px;
}

button {
	width: 100%;
	padding: 12px;
	font-size: 1em;
	background: #8B4513;
	color: white;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	margin-top: 10px;
}

button:hover {
	background: #A0522D;
}

.question, .options {
	margin-bottom: 20px;
}

.options label {
	display: block;
	margin-bottom: 8px;
}

.feedback {
	text-align: center;
	margin-top: 10px;
	color: red;
}

#qr-reader {
	width: 100%;
	margin-top: 15px;
}
</style>
</head>
<body>
	<div class="app">
		<div id="main-container">
			<h1>Jeu Pascal 2025</h1>
			<img src="carquois_chasse.png" alt="Carquois" class="carquois-img" />
			<div class="intro">
				Bonjour et bienvenue Ã  lâ€™Ã©dition 2025 du <strong>Jeu Pascal</strong>
				!<br>
				<br> AprÃ¨s une annÃ©e olympique, cette Ã©dition sâ€™annonce
				historique : <strong>Dianou</strong> atteindra enfin la majoritÃ©â€¦ et
				peut-Ãªtre ne sera-t-elle plus Ã©ligible au Jeu Pascal ? <em>Ã€
					suivre !</em><br>
				<br> Cette annÃ©e, le lieu change : fini le chÃ¢teau ! Nous voilÃ 
				tout prÃ¨s du <strong>manoir Saint-Michel</strong>, aux cÃ´tÃ©s de la
				mÃ¨re Michelleâ€¦
			</div>
			<button onclick="startQuiz()">ğŸ¹ Commencer la chasse</button>
		</div>
	</div>

	<script>
  const questions = [
	  
	  {
	      type: "qcm",
	      question: "Quelle est la capitale de la France ? (Ã©chauffement)",
	      options: ["Lyon", "Paris", "Marseille", "Fort de France"],
	      answer: "Paris"
	    },
    {
      type: "qcm",
      question: "Quelle fÃªte chrÃ©tienne cÃ©lÃ¨bre la rÃ©surrection de JÃ©sus ?",
      options: ["NoÃ«l", "PÃ¢ques", "PentecÃ´te", "Ascension"],
      answer: "PÃ¢ques"
    },
    {
      type: "qcm",
      question: "Quel animal est souvent associÃ© Ã  la distribution des Å“ufs de PÃ¢ques ?",
      options: ["Le lapin", "Le coq", "La poule", "Le mouton"],
      answer: "Le lapin"
    },
    {
      type: "qcm",
      question: "Quel aliment est traditionnellement interdit pendant le CarÃªme avant PÃ¢ques ?",
      options: ["Les fruits", "Le chocolat", "La viande", "Le poisson"],
      answer: "La viande"
    },
    {
      type: "qcm",
      question: "En France, qui apporte les Å“ufs de PÃ¢ques aux enfants ?",
      options: ["Les cloches", "Le PÃ¨re NoÃ«l", "Le lapin", "La fÃ©e des Å“ufs"],
      answer: "Les cloches"
    },
    {
      type: "qcm",
      question: "Quel jour de la semaine cÃ©lÃ¨bre-t-on PÃ¢ques ?",
      options: ["Samedi", "Dimanche", "Lundi", "Vendredi"],
      answer: "Dimanche"
    },
   
    // ... QR code questions identiques ...
    {
      type: "qr",
      question: `Vous le voyez sur la carte :<br>
        <img src='puits.png' alt='Puits' class='puits-img' /><br><br>
        Il y a une rue qui permet de creuser trÃ¨s profondâ€¦<br>
        Mais pas besoin dâ€™aller si loin pour trouver le prochain indice.`,
      expectedQr: "qr-1"
    },
    {
      type: "qr",
      question: "Bravo, maintenant le prochain indice se trouve Ã  un endroit oÃ¹ vous pouvez toucher le ciel sans jamais vous envoler",
      expectedQr: "qr-2"
    },
    {
      type: "qr",
      question: "Le prochain indice se trouve Ã  l'endroit oÃ¹ se cache un ingrÃ©dient essentiel pour prÃ©parer des crÃªpes complÃ¨tes... Sans moi, tes crÃªpes seraient bien moins savoureuses",
      expectedQr: "qr-3"
    },
    {
      type: "qr",
      question: "Ici, tu trouveras des vÃ©los, des boÃ®tes poussiÃ©reuses, et peut-Ãªtre mÃªme une vieille radio. Mais cherche bien, car l'objet qui t'intÃ©resse a des lames tranchantes et un moteur puissant",
      expectedQr: "qr-4"
    },
    {
      type: "qr",
      question: "Je suis un appareil moderne qui transforme les pixels en rÃ©alitÃ©... Pour me reÌveiller, il te faudra un objet bien preÌcis, appartenant aÌ€ une personne speÌciale",
      expectedQr: "qr-5"
    },
    {
      type: "qr",
      question: "Pour me trouver, tu devras quitter la propriÃ©tÃ© et te diriger vers un lieu majestueux. Cherche les couleurs ô€lottant au vent, elles te guideront vers l'entreÌe d'un manoir historique",
      expectedQr: "qr-6"
    },
    {
      type: "qr",
      question: "Je suis une porte qui, une fois, a failli causer un grand danger. ResteÌe fermeÌe trop longtemps, j'ai presque deÌclencheÌ un incendie",
      expectedQr: "qr-7"
    },
    {
      type: "qr",
      question: "Je suis un objet qui donne l'heure exacte deux fois par jour.Cherche-moi laÌ€ ouÌ€ le temps semble s'eÌ‚tre arreÌ‚teÌ",
      expectedQr: "qr-8"
    },
    {
      type: "qr",
      question: "Je suis un veÌhicule qui, malgreÌ les eÌmotions fortes d'hier, reste en parfait eÌtat. Cherche moi laÌ€ ouÌ€ les routes meÌ€nent aÌ€ l'aventure",
      expectedQr: "qr-9"
    },
    {
      type: "qr",
      question: "Je suis un endroit ouÌ€ la nature et les mains humaines travaillent ensemble pour faire pousser des merveilles comestibles. Ici, les leÌgumes et les herbes aromatiques se coÌ‚toient sous le soleil",
      expectedQr: "qr-10"
    }
  ];

  let currentIndex = 0;
  let html5QrCode;
  let score = 0;

  function startQuiz() {
    currentIndex = 0;
    score = 0;
    showQuestion();
  }

  function showQuestion() {
    const container = document.getElementById('main-container');
    const q = questions[currentIndex];
    container.innerHTML = `<div class="question"><h2>Q${currentIndex + 1}</h2><p>${q.question}</p></div>`;

    if (q.type === "qcm") {
      container.innerHTML += `
        <div class="options">
          ${q.options.map(opt => `
            <label>
              <input type="radio" name="option" value="${opt}"> ${opt}
            </label>
          `).join('')}
        </div>
        <button onclick="checkQcmAnswer()">Valider</button>
        <div class="feedback" id="feedback"></div>
        <p>Score actuel : <strong>${score}</strong></p>
      `;
    } else if (q.type === "qr") {
      container.innerHTML += `
        <button onclick="launchQrScanner()">ğŸ“· Scanner l'indice</button>
        <div id="qr-reader" style="display:none;"></div>
        <div class="feedback" id="feedback"></div>
        <p>Score actuel : <strong>${score}</strong></p>
      `;
    }
  }

  function checkQcmAnswer() {
    const selected = document.querySelector('input[name="option"]:checked');
    const feedback = document.getElementById("feedback");
    if (!selected) {
      feedback.textContent = "Veuillez choisir une rÃ©ponse.";
      return;
    }
    if (selected.value === questions[currentIndex].answer) {
      score++;
      nextQuestion();
    } else {
      feedback.textContent = "âŒ Mauvaise rÃ©ponse ! -1 point";
      score--;
    }
  }

  function launchQrScanner() {
    const readerDiv = document.getElementById("qr-reader");
    readerDiv.style.display = "block";
    html5QrCode = new Html5Qrcode("qr-reader");
    html5QrCode.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      qrCodeMessage => {
        html5QrCode.stop();
        readerDiv.innerHTML = "";
        validateQr(qrCodeMessage);
      },
      errorMessage => {}
    );
  }

  function validateQr(scannedCode) {
    const expected = questions[currentIndex].expectedQr;
    const feedback = document.getElementById("feedback");
    if (scannedCode === expected) {
      score++;
      nextQuestion();
    } else {
      feedback.textContent = "âŒ Mauvais QR Code ! -1 point";
      score--;
    }
  }

  function nextQuestion() {
    if (currentIndex < questions.length - 1) {
      currentIndex++;
      showQuestion();
    } else {
      document.getElementById('main-container').innerHTML = `
        <h2>ğŸ Fin de la chasse !<br>Bravo Ã  tous ğŸ‰</h2>
        <p>Votre score final est de : <strong>${score}</strong> point(s)</p>
      `;
    }
  }
</script>

</body>
</html>
